(function(){"use strict";angular.module("cardsAgainstApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("cardsAgainstApp").controller("MainCtrl",["GameService",function(a){this.game=a.game,this.board=a.board,this.players=a.players,this.nextBlackCard=function(){return a.nextBlackCard()},this.addPlayer=function(b){return a.addPlayer(b)},this.playWhiteCard=function(b,c){return a.playWhiteCard(b,c)},this.selectWinningWhiteCard=function(b){return a.selectWinningWhiteCard(b)}}])}.call(this),function(){"use strict";angular.module("cardsAgainstApp").factory("GameService",["Deck","BlackCard","WhiteCard","Player","Board","Game","blackCardList","whiteCardList",function(a,b,c,d,e,f,g,h){var i;return window.game=new(i=function(){function i(){var d;this.blackCards=new a(function(){var a,c,e;for(e=[],a=0,c=g.length;c>a;a++)d=g[a],e.push(new b(d));return e}()),this.whiteCards=new a(function(){var a,b,e;for(e=[],a=0,b=h.length;b>a;a++)d=h[a],e.push(new c(d));return e}()),this.board=new e,this.players=[],this.game=new f(this.board,this.blackCards,this.whiteCards,this.players)}return i.prototype.nextBlackCard=function(){return this.game.nextBlackCard()},i.prototype.addPlayer=function(a){return this.game.join(new d(a))},i.prototype.playWhiteCard=function(a,b){return this.game.playWhiteCard(a,b)},i.prototype.selectWinningWhiteCard=function(a){return this.game.selectWinningWhiteCard(a)},i.prototype.removePlayer=function(){},i}())}])}.call(this),function(){"use strict";angular.module("cardsAgainstApp").factory("blackCardList",function(){return["Black card 1","Black card 2","Black card 3"]})}.call(this),function(){"use strict";angular.module("cardsAgainstApp").factory("whiteCardList",function(){return["White card 1","White card 2","White card 3"]})}.call(this),function(){"use strict";angular.module("cardsAgainstApp").factory("Card",function(){var a,b;return a=0,b=function(){function b(){this.id=a++}return b}()})}.call(this),function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b},c=[].slice;angular.module("cardsAgainstApp").factory("BlackCard",["Card",function(a){var d;return d=function(a){function d(a){var b;this.text=a,d.__super__.constructor.apply(this,arguments),this.blanks=(null!=(b=this.text.match(new RegExp(e,"g")))?b.length:void 0)||0}var e;return b(d,a),e="_+",d.prototype.apply=function(){var a;if(a=1<=arguments.length?c.call(arguments,0):[],!this.blanks)return this.getText()+" "+a.join(" ");if(this.blanks!==a.length)throw new Exception(""+this.blanks+" fillers expected. Only "+a.length+" given")},d}(a)}])}.call(this),function(){"use strict";angular.module("cardsAgainstApp").factory("Board",function(){var a;return a=function(){function a(){this._cardPlayerMap={},this.clear()}return a.prototype.setBlackCard=function(a){this.blackCard=a},a.prototype.addWhiteCard=function(a,b){return this._cardPlayerMap[b]=a,this.whiteCards.push(b)},a.prototype.getWhiteCardAndPlayer=function(a){return[this.whiteCards[a],this._cardPlayerMap[this.whiteCards[a]]]},a.prototype.hasWhiteCardForPlayer=function(a){var b,c,d;d=this._cardPlayerMap;for(c in d)if(b=d[c],b.isEqual(a))return!0;return!1},a.prototype.clear=function(){return this.blackCard=null,this.whiteCards=[]},a}()})}.call(this),function(){"use strict";angular.module("cardsAgainstApp").factory("Deck",function(){var a;return a=function(){function a(a){this.cards=null!=a?a:[]}return a.prototype.shuffle=function(){},a.prototype.deal=function(a){var b,c,d,e;for(null==a&&(a=1),e=[],c=d=0;a>=0?a>d:d>a;c=a>=0?++d:--d)b=this.cards.shift(),this.cards.push(b),e.push(b);return e},a.prototype.dealOne=function(){return this.deal()[0]},a}()})}.call(this),function(){"use strict";angular.module("cardsAgainstApp").factory("Game",function(){var a;return a=function(){function a(a,b,c,d){this.board=a,this.blackCards=b,this.whiteCards=c,this.players=null!=d?d:[],this.nextBlackCard()}var b;return b=2,a.prototype.nextBlackCard=function(){return this._clearWinningRound(),this.board.clear(),this.board.setBlackCard(this.blackCards.dealOne())},a.prototype.playWhiteCard=function(a,b){var c;return c=this.players[a],this.board.hasWhiteCardForPlayer(c)?void 0:(this.board.addWhiteCard(c,c.playWhiteCard(b)),c.addWhiteCards([this.whiteCards.dealOne()]))},a.prototype.selectWinningWhiteCard=function(a){var b;return b=this.board.getWhiteCardAndPlayer(a),this.winningCard=b[0],this.winningPlayer=b[1],this.winningPlayer.addBlackCards(this.winningCard)},a.prototype.join=function(a){return a.addWhiteCards(this.whiteCards.deal(b)),this.players.push(a)},a.prototype.leave=function(a){return this.players.remove(a)},a.prototype._clearWinningRound=function(){return this.winningCard=null,this.winningPlayer=null},a}()})}.call(this),function(){"use strict";angular.module("cardsAgainstApp").factory("Player",function(){var a,b;return a=0,b=function(){function b(b,c){this.name=b,this.whiteCards=null!=c?c:[],this.id=a++,this.blackCards=[]}return b.prototype.getScore=function(){return this.blackCards.length},b.prototype.addWhiteCards=function(a){return this.whiteCards=this.whiteCards.concat(a)},b.prototype.addBlackCards=function(a){return this.blackCards=this.blackCards.concat(a)},b.prototype.playWhiteCard=function(a){return this.whiteCards.splice(a,1)[0]},b.prototype.isEqual=function(a){return this.id===a.id},b}()})}.call(this),function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("cardsAgainstApp").factory("WhiteCard",["Card",function(a){var c;return c=function(a){function c(a){this.text=a,c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.getText=function(){return this.text},c}(a)}])}.call(this);